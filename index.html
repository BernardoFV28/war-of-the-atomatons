<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Robot Warfare: Interactive Environment</title>
    <style>
        /* (O CSS permanece o mesmo da vers√£o anterior) */
        body { margin: 0; overflow: hidden; background: #050505; color: white; font-family: 'Segoe UI', sans-serif; user-select: none; }
        canvas { display: block; }
        #ui-layer { position: absolute; top: 10px; left: 10px; pointer-events: none; z-index: 5; }
        .stat-box { background: rgba(0,0,0,0.75); padding: 8px 15px; border-radius: 4px; margin-bottom: 5px; border-left: 4px solid #00d2ff; font-weight: bold; }
        #mission-hud { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); background: rgba(255, 166, 0, 0.2); border: 2px solid orange; padding: 10px 25px; border-radius: 50px; text-align: center; min-width: 300px; display: none; z-index: 5; box-shadow: 0 0 15px rgba(255, 166, 0, 0.3); }
        #mission-title { font-weight: bold; color: orange; text-transform: uppercase; margin: 0; }
        #boss-hud { position: absolute; top: 80px; left: 50%; transform: translateX(-50%); width: 60%; display: none; z-index: 5; flex-direction: column; align-items: center; }
        #boss-health-bar-bg { width: 100%; height: 12px; background: #333; border: 1px solid white; border-radius: 6px; overflow: hidden; }
        #boss-health-bar-fill { width: 100%; height: 100%; background: linear-gradient(90deg, #ff0055, #ff5500); }
        #menu-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.92); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        .hidden { display: none !important; }
        #shop-container { display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
        .upgrade-card { background-image: url('assets/card.png'); background-size: cover; background-position: center; background-color: #222; border: 2px solid #444; padding: 15px; width: 180px; height: 260px; display: flex; flex-direction: column; align-items: center; text-align: center; cursor: pointer; border-radius: 12px; transition: 0.2s; pointer-events: all; }
        .upgrade-card:hover { transform: translateY(-5px); border-color: #00d2ff; }
        .upgrade-card h3 { font-size: 1.2rem; margin: 10px 0; text-shadow: 0 2px 4px black; }
        .upgrade-card p { font-size: 0.8rem; color: #ddd; }
        .cost { color: #ffd700; font-weight: bold; margin-top: auto; padding-bottom: 10px; }
        .btn { background: linear-gradient(45deg, #00d2ff, #0077ff); border: none; padding: 12px 40px; color: white; font-size: 1.2rem; font-weight: bold; cursor: pointer; margin: 20px; border-radius: 50px; pointer-events: all; }
        #achievement-container { position: absolute; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 6; }
        .ach-toast { background: rgba(0, 40, 80, 0.9); color: white; padding: 12px; border-radius: 5px; border-left: 5px solid #ffd700; animation: slideIn 0.5s; }
        @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div class="stat-box">üõ°Ô∏è N√≠vel: <span id="hud-level">1</span></div>
        <div class="stat-box">‚ú® XP: <span id="hud-xp">0</span> / <span id="hud-next-xp">100</span></div>
        <div class="stat-box" style="border-color: #ff0055">‚ù§Ô∏è HP: <span id="hud-hp">100</span></div>
        <div class="stat-box" style="border-color: gold">üèÜ SP: <span id="hud-sp">0</span></div>
    </div>
    <div id="mission-hud">
        <p id="mission-title">NENHUMA MISS√ÉO</p>
        <div id="mission-timer">Tempo: --:--</div>
    </div>
    <div id="boss-hud">
        <div style="color: #ff0055; font-weight: bold; margin-bottom: 5px;">BOSS</div>
        <div id="boss-health-bar-bg"><div id="boss-health-bar-fill"></div></div>
    </div>
    <div id="achievement-container"></div>
    <div id="menu-overlay">
        <div id="start-screen">
            <h1>ROBOT WARFARE</h1>
            <p>Use o ambiente a seu favor!</p>
            <button class="btn" id="btn-start">INICIAR</button>
        </div>
        <div id="shop-screen" class="hidden">
            <h2 style="color:gold;">UPGRADES DISPON√çVEIS</h2>
            <div id="shop-container">
                <div class="upgrade-card" data-upgrade="damage"><h3>Dano</h3><p>Mais poder de fogo.</p><p class="cost">1 SP</p></div>
                <div class="upgrade-card" data-upgrade="speed"><h3>Motor</h3><p>Velocidade mov.</p><p class="cost">1 SP</p></div>
                <div class="upgrade-card" data-upgrade="firerate"><h3>Cad√™ncia</h3><p>Atire mais r√°pido.</p><p class="cost">2 SP</p></div>
                <div class="upgrade-card" data-upgrade="multishot"><h3>Multi-Tiro</h3><p>+ Proj√©teis.</p><p class="cost">5 SP</p></div>
                <div class="upgrade-card" data-upgrade="heal"><h3>Reparo</h3><p>Cura 50% HP.</p><p class="cost">1 SP</p></div>
            </div>
            <button class="btn" id="btn-close-shop">VOLTAR</button>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
/** * CONFIGURA√á√ÉO DE ASSETS */
const assets = {
    bgTile: new Image(), cardBg: new Image(), player: new Image(), bullet: new Image(),
    enemyBasic: new Image(), enemyFast: new Image(), enemyTank: new Image(),
    boss: new Image(), ammo: new Image(), 
    wall: new Image() // NOVO ASSET DE PAREDE
};
// Carregando os caminhos
assets.bgTile.src = 'assets/dungeon_floor.png'; assets.cardBg.src = 'assets/card.png';
assets.player.src = 'assets/player.png'; assets.bullet.src = 'assets/bullet.png';
assets.enemyBasic.src = 'assets/enemy_robot.png'; assets.enemyFast.src = 'assets/enemy_fast.png';
assets.enemyTank.src = 'assets/enemy_tank.png'; assets.boss.src = 'assets/boss_robot.png';
assets.ammo.src = 'assets/ammo.png';
assets.wall.src = 'assets/scrap_block.png'; // Verifique se o arquivo existe!

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize); resize();

/** LOGICA DO JOGO */
class Game {
    constructor() {
        this.player = { x:0, y:0, size:30, speed:5, baseSpeed:5, hp:100, maxHp:100, level:1, xp:0, xpToNext:100, skillPoints:0, damage:15, fireRate:15, multiShot:1, cooldown:0 };
        this.bullets = []; this.enemies = []; this.drops = []; this.particles = [];
        this.environment = []; // NOVO ARRAY PARA O CEN√ÅRIO
        this.boss = null; this.score = 0; this.isRunning = false; this.isPaused = false;
        this.input = { keys: {}, mouseX: 0, mouseY: 0, mouseDown: false };
        this.currentMission = null; this.missionTimer = 0; this.missionCooldown = 300;
        this.statMultipliers = { enemySpeed: 1, enemyHealth: 1, xpGain: 1, playerDamage: 1 };
        this.init();
    }

    init() {
        // (Listeners de input e bot√µes iguais ao anterior)
        window.addEventListener('keydown', e => this.input.keys[e.key] = true);
        window.addEventListener('keyup', e => this.input.keys[e.key] = false);
        window.addEventListener('mousemove', e => { this.input.mouseX = e.clientX; this.input.mouseY = e.clientY; });
        window.addEventListener('mousedown', () => this.input.mouseDown = true);
        window.addEventListener('mouseup', () => this.input.mouseDown = false);
        document.getElementById('btn-start').addEventListener('click', () => this.start());
        document.getElementById('btn-close-shop').addEventListener('click', () => this.toggleShop());
        document.querySelectorAll('.upgrade-card').forEach(card => {
            card.addEventListener('click', () => this.buyUpgrade(card.getAttribute('data-upgrade')));
        });
    }

    start() {
        this.player.x = canvas.width/2; this.player.y = canvas.height/2;
        this.player.hp = 100; this.player.level = 1; this.player.xp = 0;
        this.enemies = []; this.bullets = []; this.drops = []; this.environment = [];
        this.generateMap(); // GERAR PAREDES INICIAIS
        this.isRunning = true;
        document.getElementById('menu-overlay').classList.add('hidden');
        requestAnimationFrame(() => this.loop());
    }

    // --- NOVO: GERA√á√ÉO DE MAPA (PAREDES) ---
    generateMap() {
        const wallSize = 64; // Tamanho do bloco da parede
        // Bordas
        for(let x=0; x<canvas.width; x+=wallSize) {
            this.environment.push({type:'wall', x:x, y:0, w:wallSize, h:wallSize});
            this.environment.push({type:'wall', x:x, y:canvas.height-wallSize, w:wallSize, h:wallSize});
        }
        for(let y=wallSize; y<canvas.height-wallSize; y+=wallSize) {
            this.environment.push({type:'wall', x:0, y:y, w:wallSize, h:wallSize});
            this.environment.push({type:'wall', x:canvas.width-wallSize, y:y, w:wallSize, h:wallSize});
        }
        // Obst√°culos aleat√≥rios no meio (longe do centro onde o player nasce)
        for(let i=0; i<10; i++) {
            let bx = Math.random() * (canvas.width - 200) + 100;
            let by = Math.random() * (canvas.height - 200) + 100;
            if(Math.hypot(bx - canvas.width/2, by - canvas.height/2) > 200) {
                 this.environment.push({type:'wall', x:bx, y:by, w:wallSize, h:wallSize});
            }
        }
    }

    // --- NOVO: SPAWN DE ITENS INTERATIVOS ---
    spawnEnvironmentItem() {
        if(Math.random() > 0.01) return; // Chance baixa por frame
        
        const typeRoll = Math.random();
        let type = 'barrel'; // Barril explosivo
        if(typeRoll > 0.5) type = 'trap'; // Armadilha de lentid√£o
        if(typeRoll > 0.8) type = 'healZone'; // Zona de cura

        let x = Math.random() * (canvas.width-100) + 50;
        let y = Math.random() * (canvas.height-100) + 50;
        
        // N√£o spawnar em cima de paredes
        if(!this.checkWallCollision(x, y, 30)) {
            this.environment.push({ type: type, x: x, y: y, r: 40, life: (type==='healZone'? 300 : 1) });
        }
    }

    // --- NOVO: CHECAGEM DE COLIS√ÉO COM PAREDE (AABB Simples) ---
    checkWallCollision(x, y, size) {
        for(const obj of this.environment) {
            if(obj.type === 'wall') {
                // Verifica se o quadrado do personagem sobrep√µe o quadrado da parede
                if (x - size < obj.x + obj.w && x + size > obj.x &&
                    y - size < obj.y + obj.h && y + size > obj.y) {
                    return true;
                }
            }
        }
        return false;
    }

    loop() {
        if (!this.isRunning || this.isPaused) return;
        ctx.fillStyle = '#111'; ctx.fillRect(0, 0, canvas.width, canvas.height);
        if (assets.bgTile.complete) { ctx.fillStyle = ctx.createPattern(assets.bgTile, 'repeat'); ctx.fillRect(0,0,canvas.width, canvas.height); }

        this.spawnEnvironmentItem(); // Tenta spawnar itens
        this.updateEnvironment();    // Atualiza e desenha itens e paredes
        this.updateMissions();
        this.updatePlayer();
        this.updateEnemies();
        this.updateBullets();
        this.updateDrops();
        updateUI();
        requestAnimationFrame(() => this.loop());
    }

    // --- NOVO: ATUALIZA√á√ÉO DO AMBIENTE ---
    updateEnvironment() {
        for(let i = this.environment.length - 1; i >= 0; i--) {
            const obj = this.environment[i];
            
            // 1. PAREDES
            if(obj.type === 'wall') {
                if(assets.wall.complete) ctx.drawImage(assets.wall, obj.x, obj.y, obj.w, obj.h);
                else { ctx.fillStyle = '#444'; ctx.fillRect(obj.x, obj.y, obj.w, obj.h); }
                continue; // Paredes s√£o est√°ticas, n√£o precisam de mais l√≥gica aqui
            }

            // 2. BARRIS EXPLOSIVOS
            if(obj.type === 'barrel') {
                ctx.fillStyle = 'red'; ctx.beginPath(); ctx.arc(obj.x, obj.y, 20, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = 'orange'; ctx.font='bold 20px Arial'; ctx.fillText("‚ö†", obj.x-10, obj.y+5);
                // A intera√ß√£o ocorre na fun√ß√£o updateBullets
            }

            // 3. ARMADILHAS DE CH√ÉO (Lentid√£o)
            if(obj.type === 'trap') {
                 ctx.fillStyle = 'rgba(100, 50, 0, 0.5)'; ctx.fillRect(obj.x-obj.r, obj.y-obj.r, obj.r*2, obj.r*2);
                 // Afeta player
                 if(Math.hypot(this.player.x - obj.x, this.player.y - obj.y) < obj.r) this.player.speed = this.player.baseSpeed * 0.5;
                 // Afeta inimigos
                 this.enemies.forEach(e => {
                     if(Math.hypot(e.x - obj.x, e.y - obj.y) < obj.r) e.currentSpeed = e.baseSpeed * 0.5;
                 });
            }

            // 4. ZONAS DE CURA
            if(obj.type === 'healZone') {
                ctx.fillStyle = `rgba(0, 255, 0, ${obj.life/300 * 0.4})`;
                ctx.beginPath(); ctx.arc(obj.x, obj.y, obj.r, 0, Math.PI*2); ctx.fill();
                
                if(Math.hypot(this.player.x - obj.x, this.player.y - obj.y) < obj.r && this.player.hp < this.player.maxHp) {
                    this.player.hp += 0.2; // Cura lenta
                    obj.life -= 2; // Gasta a zona mais r√°pido se estiver usando
                }
                obj.life--;
                if(obj.life <= 0) this.environment.splice(i, 1);
            }
        }
    }

    updatePlayer() {
        const p = this.player;
        p.speed = p.baseSpeed; // Reseta velocidade base todo frame (para armadilhas funcionarem)

        // --- C√ÅLCULO DE MOVIMENTO COM COLIS√ÉO ---
        let nextX = p.x; let nextY = p.y;
        if (this.input.keys['w']) nextY -= p.speed;
        if (this.input.keys['s']) nextY += p.speed;
        if (this.input.keys['a']) nextX -= p.speed;
        if (this.input.keys['d']) nextX += p.speed;

        // S√≥ aplica o movimento se n√£o bater na parede
        if(!this.checkWallCollision(nextX, p.y, p.size)) p.x = nextX;
        if(!this.checkWallCollision(p.x, nextY, p.size)) p.y = nextY;
        // ------------------------------------------

        if (p.cooldown > 0) p.cooldown--;
        let actualFireRate = (this.currentMission?.id === 'frenzy') ? 2 : p.fireRate;
        if (this.input.mouseDown && p.cooldown <= 0) {
            for(let i=0; i<p.multiShot; i++) {
                const angle = Math.atan2(this.input.mouseY - p.y, this.input.mouseX - p.x) + (i - (p.multiShot-1)/2) * 0.1;
                this.bullets.push({ x: p.x, y: p.y, vx: Math.cos(angle)*10, vy: Math.sin(angle)*10, damage: p.damage * this.statMultipliers.playerDamage, type: 'player' });
            }
            p.cooldown = actualFireRate;
        }
        ctx.drawImage(assets.player, p.x-p.size, p.y-p.size, p.size*2, p.size*2);
    }

    updateEnemies() {
        // (Spawn de inimigos igual ao anterior...)
        if (Math.random() < 0.02) {
            const x = Math.random() < 0.5 ? -50 : canvas.width + 50; const y = Math.random() * canvas.height;
            let type = 'basic';
            if(this.currentMission?.id === 'tank_inv') type = 'tank'; else if(this.currentMission?.id === 'swarm') type = 'fast';
            let baseSpeed = (type === 'fast' ? 4 : 2) * this.statMultipliers.enemySpeed;
            this.enemies.push({ x, y, type, hp: 20 * this.statMultipliers.enemyHealth, baseSpeed: baseSpeed, currentSpeed: baseSpeed });
        }

        for (let i = this.enemies.length-1; i >= 0; i--) {
            const e = this.enemies[i];
            e.currentSpeed = e.baseSpeed; // Reseta velocidade para armadilhas

            const angle = Math.atan2(this.player.y - e.y, this.player.x - e.x);
            // Inimigos simples: se baterem na parede, eles param (n√£o deslizam)
            let nextX = e.x + Math.cos(angle) * e.currentSpeed;
            let nextY = e.y + Math.sin(angle) * e.currentSpeed;
            
            if(!this.checkWallCollision(nextX, nextY, 25)) {
                 e.x = nextX; e.y = nextY;
            }

            let img = assets.enemyBasic;
            if(e.type === 'tank') img = assets.enemyTank; if(e.type === 'fast') img = assets.enemyFast;
            ctx.drawImage(img, e.x-25, e.y-25, 50, 50);

            if (Math.hypot(this.player.x - e.x, this.player.y - e.y) < 40) {
                this.player.hp -= (this.currentMission?.id === 'glass' ? 100 : 10);
                this.enemies.splice(i, 1);
                if(this.player.hp <= 0) location.reload();
            }
        }
    }

    updateBullets() {
        for(let i=this.bullets.length-1; i>=0; i--) {
            const b = this.bullets[i];
            b.x += b.vx; b.y += b.vy;
            ctx.drawImage(assets.bullet, b.x-5, b.y-5, 10, 10);

            // Colis√£o Bala x Parede
            if(this.checkWallCollision(b.x, b.y, 5)) { this.bullets.splice(i, 1); continue; }

            // --- NOVO: INTERA√á√ÉO COM BARRIL ---
            if(b.type === 'player') {
                for(let k=this.environment.length-1; k>=0; k--) {
                    const env = this.environment[k];
                    if(env.type === 'barrel' && Math.hypot(b.x - env.x, b.y - env.y) < 25) {
                        // BARRIL EXPLODE!
                        this.environment.splice(k, 1); // Remove barril
                        this.bullets.splice(i,1); // Remove bala
                        this.showToast("üí• KABOOM!");
                        // Dano em √°rea
                        for(let j=this.enemies.length-1; j>=0; j--) {
                             if(Math.hypot(this.enemies[j].x - env.x, this.enemies[j].y - env.y) < 150) {
                                 this.enemies[j].hp -= 100; // Dano alto
                                 if(this.enemies[j].hp<=0) { this.enemies.splice(j,1); this.player.xp+=20; }
                             }
                        }
                        break; // Sai do loop de environment pois a bala j√° foi usada
                    }
                }
            }
            // --------------------------------

            // (Colis√£o Bala x Inimigo normal - c√≥digo anterior)
            if(b.type === 'player' && this.bullets[i]) { // Verifica se a bala ainda existe
                 for(let j=this.enemies.length-1; j>=0; j--) {
                    const e = this.enemies[j];
                    if(Math.hypot(b.x - e.x, b.y - e.y) < 30) {
                        e.hp -= b.damage;
                        this.bullets.splice(i, 1);
                        if(e.hp <= 0) {
                            this.enemies.splice(j, 1);
                            this.player.xp += 15 * this.statMultipliers.xpGain;
                            if(this.player.xp >= this.player.xpToNext) this.levelUp();
                        }
                        break;
                    }
                }
            }
        }
    }

    // (Fun√ß√µes updateDrops, levelUp, showToast, toggleShop, buyUpgrade, updateMissions, triggerRandomMission permanecem iguais ao c√≥digo anterior e foram omitidas aqui para economizar espa√ßo, mas devem estar presentes no c√≥digo final)
    updateDrops() { for(let i=this.drops.length-1; i>=0; i--) { const d = this.drops[i]; ctx.drawImage(assets.ammo, d.x-15, d.y-15, 30, 30); if(Math.hypot(this.player.x - d.x, this.player.y - d.y) < 30) { this.player.hp = Math.min(this.player.maxHp, this.player.hp + 25); this.drops.splice(i, 1); }}}
    levelUp() { this.player.level++; this.player.xp = 0; this.player.skillPoints++; this.showToast("Level Up! Loja dispon√≠vel."); this.toggleShop(true); }
    showToast(m) { const t = document.createElement('div'); t.className = 'ach-toast'; t.innerText = m; document.getElementById('achievement-container').appendChild(t); setTimeout(() => t.remove(), 3000); }
    toggleShop(force=false) { this.isPaused = force || !this.isPaused; document.getElementById('menu-overlay').classList.toggle('hidden', !this.isPaused); document.getElementById('shop-screen').classList.toggle('hidden', !this.isPaused); document.getElementById('start-screen').classList.add('hidden'); if(!this.isPaused) requestAnimationFrame(() => this.loop()); }
    buyUpgrade(type) { const costs = { damage: 1, speed: 1, firerate: 2, multishot: 5, heal: 1 }; if (this.player.skillPoints >= costs[type]) { this.player.skillPoints -= costs[type]; if(type === 'damage') this.player.damage += 8; if(type === 'speed') this.player.baseSpeed += 0.8; if(type === 'firerate') this.player.fireRate = Math.max(4, this.player.fireRate - 2); if(type === 'multishot') this.player.multiShot++; if(type === 'heal') this.player.hp = Math.min(this.player.maxHp, this.player.hp + 50); this.showToast("Upgrade!"); updateUI(); } else { this.showToast("Pontos Insuficientes!"); }}
    updateMissions() { if (!this.currentMission) { this.missionCooldown--; if (this.missionCooldown <= 0) this.triggerRandomMission(); document.getElementById('mission-hud').style.display = 'none'; } else { document.getElementById('mission-hud').style.display = 'block'; document.getElementById('mission-title').innerText = this.currentMission.title; document.getElementById('mission-timer').innerText = `Tempo: ${Math.ceil(this.missionTimer/60)}s`; this.missionTimer--; if (this.currentMission.id === 'pacifist' && this.input.mouseDown) { this.showToast("Miss√£o Falhou!"); this.currentMission = null; this.missionCooldown = 400; } if (this.missionTimer <= 0) { if(this.currentMission.id === 'pacifist') { this.player.xp += 200; this.showToast("Sucesso! +200 XP"); } this.currentMission = null; this.missionCooldown = 600; this.statMultipliers = { enemySpeed: 1, enemyHealth: 1, xpGain: 1, playerDamage: 1 }; }}}
    triggerRandomMission() { const missions = [ { id: 'pacifist', title: "Pacifista: N√£o atire!", duration: 400, msg: "Sobreviva sem disparar para ganhar 200 XP!" }, { id: 'tank_inv', title: "Invas√£o de Tanks", duration: 500, msg: "Todos os rob√¥s agora s√£o blindados!" }, { id: 'speed_up', title: "Sobrecarga de Motores", duration: 400, msg: "Inimigos est√£o 2x mais r√°pidos!" }, { id: 'glass', title: "Canh√£o de Vidro", duration: 300, msg: "Dano x3, mas voc√™ morre com 1 toque!" }, { id: 'supply', title: "Chuva de Suprimentos", duration: 300, msg: "V√°rias caixas de reparo caindo!" }, { id: 'gold', title: "Corrida do Ouro", duration: 400, msg: "Inimigos d√£o o dobro de XP!" }, { id: 'swarm', title: "Enxame de Rob√¥s", duration: 300, msg: "Muitos rob√¥s r√°pidos aparecendo!" }, { id: 'frenzy', title: "Frenesi de Disparo", duration: 300, msg: "Velocidade de tiro infinita!" }]; this.currentMission = missions[Math.floor(Math.random() * missions.length)]; this.missionTimer = this.currentMission.duration; this.showToast(this.currentMission.msg); this.statMultipliers = { enemySpeed: 1, enemyHealth: 1, xpGain: 1, playerDamage: 1 }; if(this.currentMission.id === 'tank_inv') this.statMultipliers.enemyHealth = 3; if(this.currentMission.id === 'speed_up') this.statMultipliers.enemySpeed = 2; if(this.currentMission.id === 'gold') this.statMultipliers.xpGain = 2; if(this.currentMission.id === 'glass') this.statMultipliers.playerDamage = 3; if(this.currentMission.id === 'supply') { for(let i=0; i<5; i++) this.drops.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height}); }}
}

const game = new Game();
function updateUI() { document.getElementById('hud-level').innerText = game.player.level; document.getElementById('hud-xp').innerText = Math.floor(game.player.xp); document.getElementById('hud-next-xp').innerText = game.player.xpToNext; document.getElementById('hud-hp').innerText = Math.floor(game.player.hp); document.getElementById('hud-sp').innerText = game.player.skillPoints; }
</script>
</body>
</html>
